# PPTAgent Docker é•œåƒç‰ˆæœ¬ç®¡ç†æŒ‡å—

## æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ç®€åŒ–çš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œæ¨¡ä»¿ `dense-llm` é¡¹ç›®çš„ `IMAGE_REPO` å’Œ `IMAGE_TAG` æ¨¡å¼ã€‚

## ç‰ˆæœ¬é…ç½®

### æ–‡ä»¶ç»“æ„

```
PPTAgent/
â”œâ”€â”€ VERSION          # ç‰ˆæœ¬å·æ–‡ä»¶ï¼ˆå½“å‰ï¼š1.0.0ï¼‰
â””â”€â”€ Makefile         # è‡ªåŠ¨è¯»å– VERSION æ–‡ä»¶
```

### Makefile å˜é‡

```makefile
IMAGE_REPO=pptagent
IMAGE_TAG=$(shell cat VERSION 2>/dev/null || echo "dev")
```

- **IMAGE_REPO**: é•œåƒä»“åº“åç§°ï¼Œå›ºå®šä¸º `pptagent`
- **IMAGE_TAG**: ä» VERSION æ–‡ä»¶è¯»å–ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™ä½¿ç”¨ `dev`

## ç‰ˆæœ¬å·è§„èŒƒ

é‡‡ç”¨**è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼ˆSemantic Versioningï¼‰**ï¼š

```
major.minor.patch
ç¤ºä¾‹: 1.0.0, 1.2.3, 2.0.0
```

### ç‰ˆæœ¬å·å«ä¹‰

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **major**ï¼ˆä¸»ç‰ˆæœ¬ï¼‰ | ä¸å…¼å®¹çš„ API å˜æ›´ | 1.x.x â†’ 2.0.0 |
| **minor**ï¼ˆæ¬¡ç‰ˆæœ¬ï¼‰ | å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢ | 1.0.x â†’ 1.1.0 |
| **patch**ï¼ˆä¿®è®¢ç‰ˆï¼‰ | å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ | 1.0.0 â†’ 1.0.1 |

### ç‰ˆæœ¬æ›´æ–°å†³ç­–è¡¨

| ä¿®æ”¹ç±»å‹ | ç‰ˆæœ¬å˜æ›´ | ç¤ºä¾‹ |
|---------|---------|------|
| ä¿®å¤ bugã€å°æ”¹è¿› | patch +1 | 1.0.0 â†’ 1.0.1 |
| æ–°å¢åŠŸèƒ½ï¼ˆå…¼å®¹ï¼‰| minor +1 | 1.0.3 â†’ 1.1.0 |
| ç ´åæ€§å˜æ›´ | major +1 | 1.5.2 â†’ 2.0.0 |

**ä½ çš„æƒ…å†µ**ï¼šæ–°å¢ chromium ä¸‹è½½ â†’ åŠŸèƒ½å¢å¼ºï¼ˆå…¼å®¹ï¼‰â†’ **1.0.0**ï¼ˆé¦–æ¬¡æ­£å¼å‘å¸ƒï¼‰

## æ„å»ºé•œåƒ

### æŸ¥çœ‹å½“å‰ç‰ˆæœ¬

```bash
# æ–¹æ³• 1ï¼šè¯»å– VERSION æ–‡ä»¶
cat VERSION

# æ–¹æ³• 2ï¼šä½¿ç”¨ make å‘½ä»¤
make version
```

### æ„å»ºæ–°ç‰ˆæœ¬

æ¯æ¬¡æ„å»ºä¼šè‡ªåŠ¨æ‰“**ä¸¤ä¸ªæ ‡ç­¾**ï¼š

1. `pptagent:1.0.0`ï¼ˆå…·ä½“ç‰ˆæœ¬ï¼‰
2. `pptagent:latest`ï¼ˆå§‹ç»ˆæŒ‡å‘æœ€æ–°ç‰ˆï¼‰

```bash
# ç¡®è®¤å½“å‰ç‰ˆæœ¬
cat VERSION
# è¾“å‡ºï¼š1.0.0

# æ„å»ºé•œåƒ
make docker-build

# ç”Ÿæˆçš„é•œåƒï¼š
# - pptagent:1.0.0
# - pptagent:latest
```

### æ›´æ–°ç‰ˆæœ¬å·

```bash
# ç¼–è¾‘ VERSION æ–‡ä»¶
echo "1.1.0" > VERSION

# é‡æ–°æ„å»ºï¼ˆä¼šç”Ÿæˆæ–°ç‰ˆæœ¬ï¼‰
make docker-build

# æ–°é•œåƒï¼š
# - pptagent:1.1.0
# - pptagent:latestï¼ˆæŒ‡å‘ 1.1.0ï¼‰
```

## å…³äº latest æ ‡ç­¾

### è‡ªåŠ¨è¦†ç›–æœºåˆ¶

- **ä¸éœ€è¦æ‰‹åŠ¨åˆ é™¤æ—§çš„ latest æ ‡ç­¾**
- Docker æ„å»ºæ—¶ä¼š**è‡ªåŠ¨è¦†ç›–** latest æ ‡ç­¾
- æ—§é•œåƒä¼šå˜æˆ `<none>:<none>`ï¼ˆdangling imageï¼‰

### ç¤ºä¾‹æµç¨‹

```bash
# åˆå§‹çŠ¶æ€
docker images
# pptagent  latest  abc123  5 minutes ago  2GB

# ä¿®æ”¹ VERSION å¹¶é‡æ–°æ„å»º
echo "1.1.0" > VERSION
make docker-build

# æ–°çŠ¶æ€
docker images
# pptagent  1.1.0   def456  Just now       2GB
# pptagent  latest  def456  Just now       2GB  â† è‡ªåŠ¨æ›´æ–°
# <none>    <none>  abc123  5 minutes ago  2GB  â† æ—§é•œåƒå˜æˆ dangling
```

### æ¸…ç†æ—§é•œåƒ

```bash
# æ¸…ç† dangling imagesï¼ˆæ¨èå®šæœŸæ‰§è¡Œï¼‰
docker image prune -f

# æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒ
docker image prune -a

# æ¸…ç†ç‰¹å®šç‰ˆæœ¬
docker rmi pptagent:1.0.0
```

## Docker å±‚ç¼“å­˜æœºåˆ¶

### ç¼“å­˜åŸç†

Docker çš„å±‚ç¼“å­˜æœºåˆ¶**ä¸ä¾èµ–é•œåƒåç§°**ï¼Œè€Œæ˜¯åŸºäº**å±‚å†…å®¹çš„å“ˆå¸Œå€¼**ã€‚è¿™æ„å‘³ç€å³ä½¿é•œåƒåç§°æ”¹å˜ï¼ˆå¦‚ `pptagent-complete` â†’ `pptagent`ï¼‰ï¼Œåªè¦ Dockerfile æŒ‡ä»¤ç›¸åŒï¼ŒDocker ä»ç„¶å¯ä»¥å¤ç”¨ä¹‹å‰æ„å»ºçš„å±‚ã€‚

#### ç¼“å­˜æŸ¥æ‰¾é€»è¾‘

```
1. è¯»å– Dockerfile æŒ‡ä»¤ï¼ˆå¦‚ RUN apt-get install chromiumï¼‰
2. è®¡ç®—æŒ‡ä»¤ + ä¸Šä¸‹æ–‡çš„å“ˆå¸Œå€¼
3. åœ¨æœ¬åœ°æ‰€æœ‰é•œåƒä¸­æŸ¥æ‰¾ç›¸åŒå“ˆå¸Œçš„å±‚
4. å¦‚æœæ‰¾åˆ° â†’ å¤ç”¨è¯¥å±‚ï¼ˆä¸ç®¡å±äºå“ªä¸ªé•œåƒï¼‰
5. å¦‚æœæ²¡æ‰¾åˆ° â†’ é‡æ–°æ„å»º
```

### é•œåƒé‡å‘½åä¸ç¼“å­˜å¤ç”¨

å½“ä½ å°†é•œåƒä» `pptagent-complete` é‡å‘½åä¸º `pptagent` æ—¶ï¼š

```bash
# æ—§é•œåƒï¼ˆå·²å­˜åœ¨ï¼‰
pptagent-complete:latest  (ID: abc123)
  â”œâ”€ Layer 1: FROM python:3.11-slim
  â”œâ”€ Layer 2: COPY uv
  â”œâ”€ Layer 3: ENV variables
  â”œâ”€ Layer 4: RUN apt-get install (æ—§ç‰ˆæœ¬)
  â””â”€ ...

# æ–°é•œåƒï¼ˆå‡†å¤‡æ„å»ºï¼‰
pptagent:1.0.0
  â”œâ”€ Layer 1: FROM python:3.11-slim      âœ… ç›¸åŒ â†’ å¤ç”¨æ—§é•œåƒ Layer 1
  â”œâ”€ Layer 2: COPY uv                    âœ… ç›¸åŒ â†’ å¤ç”¨æ—§é•œåƒ Layer 2
  â”œâ”€ Layer 3: ENV variables              âœ… ç›¸åŒ â†’ å¤ç”¨æ—§é•œåƒ Layer 3
  â”œâ”€ Layer 4: RUN apt-get install ...    â“ å–å†³äºæ˜¯å¦ä¿®æ”¹
  â””â”€ ...
```

**ç»“è®º**ï¼šâœ… èƒ½å¤Ÿå¤ç”¨æ—§é•œåƒçš„å±‚æ¥åŠ é€Ÿæ„å»ºï¼Œåç§°æ”¹å˜ä¸å½±å“ç¼“å­˜ã€‚

### Dockerfile å±‚åˆ†æ

ä»¥é¡¹ç›®ä¸­çš„ `Dockerfile` ä¸ºä¾‹ï¼Œåˆ†æå“ªäº›å±‚ä¼šè¢«ç¼“å­˜ï¼š

| Dockerfile è¡Œ | æŒ‡ä»¤ | ç¼“å­˜çŠ¶æ€ | è¯´æ˜ |
|--------------|------|---------|------|
| 4 | `FROM python:3.11-slim` | âœ… **ä¼šç¼“å­˜** | åŸºç¡€é•œåƒä¸å˜ |
| 5 | `COPY --from=uv` | âœ… **ä¼šç¼“å­˜** | uv å·¥å…·ä¸å˜ |
| 8-13 | `ENV` | âœ… **ä¼šç¼“å­˜** | ç¯å¢ƒå˜é‡ä¸å˜ |
| 16 | `WORKDIR /app` | âœ… **ä¼šç¼“å­˜** | å·¥ä½œç›®å½•ä¸å˜ |
| 20-38 | `RUN apt-get install` | âš ï¸ **å–å†³äºä¿®æ”¹** | å¦‚æœæ·»åŠ äº† chromiumï¼Œæ­¤å±‚ä¼šé‡å»º |
| 41 | `COPY . /app/PPTAgent` | âŒ **é€šå¸¸ä¸ç¼“å­˜** | ä»£ç ç»å¸¸å˜åŒ– |
| 48-50 | `RUN uv pip install` | âŒ **ä¸ä¼šç¼“å­˜** | ä¾èµ–ä¸Šä¸€å±‚ï¼ˆCOPY å¤±æ•ˆï¼‰ |
| 53-54 | `RUN playwright install` | âŒ **ä¸ä¼šç¼“å­˜** | ä¾èµ–ä¸Šä¸€å±‚ |

**é‡è¦è§„åˆ™**ï¼šä¸€æ—¦æŸä¸€å±‚å¤±æ•ˆï¼Œ**åç»­æ‰€æœ‰å±‚éƒ½ä¼šå¤±æ•ˆ**ï¼ˆè¿é”ååº”ï¼‰ã€‚

### æ„å»ºæ—¶é—´ä¼°ç®—

#### æƒ…å†µ 1ï¼šæ·»åŠ  chromium åçš„é¦–æ¬¡æ„å»º

```bash
make docker-build

# æ„å»ºè¿‡ç¨‹ï¼š
âœ… Step 1-4: ç¼“å­˜å‘½ä¸­ï¼ˆFROM, COPY uv, ENV, WORKDIRï¼‰  # èŠ‚çœ 1-2 åˆ†é’Ÿ
âŒ Step 5: RUN apt-get install chromium  # é‡æ–°æ„å»ºï¼ˆæ·»åŠ äº†æ–°åŒ…ï¼‰
âŒ Step 6+: åç»­æ‰€æœ‰å±‚é‡æ–°æ„å»ºï¼ˆè¿é”ååº”ï¼‰

# æ€»æ—¶é—´ï¼šçº¦ 10-13 åˆ†é’Ÿ
# ï¼ˆç›¸æ¯”ä»é›¶å¼€å§‹çš„ 15 åˆ†é’Ÿï¼ŒèŠ‚çœçº¦ 2-5 åˆ†é’Ÿï¼‰
```

#### æƒ…å†µ 2ï¼šDockerfile ä¸å˜ï¼Œä»£ç æœªå˜åŒ–

```bash
make docker-build

# æ„å»ºè¿‡ç¨‹ï¼š
âœ… æ‰€æœ‰å±‚ç¼“å­˜å‘½ä¸­
# è¾“å‡ºå…¨æ˜¯ "Using cache"

# æ€»æ—¶é—´ï¼šçº¦ 10-30 ç§’
# ï¼ˆç›¸æ¯”ä»é›¶å¼€å§‹çš„ 15 åˆ†é’Ÿï¼ŒèŠ‚çœ 99% æ—¶é—´ï¼‰
```

#### æƒ…å†µ 3ï¼šDockerfile ä¸å˜ï¼Œä»£ç æœ‰å˜åŒ–

```bash
make docker-build

# æ„å»ºè¿‡ç¨‹ï¼š
âœ… Step 1-5: ç¼“å­˜å‘½ä¸­ï¼ˆç³»ç»ŸåŒ…å®‰è£…ï¼‰
âŒ Step 6: COPY . /app/PPTAgent  # ä»£ç æ”¹å˜ï¼Œç¼“å­˜å¤±æ•ˆ
âŒ Step 7+: Python åŒ…é‡æ–°å®‰è£…

# æ€»æ—¶é—´ï¼šçº¦ 2-3 åˆ†é’Ÿ
# ï¼ˆç›¸æ¯”ä»é›¶å¼€å§‹çš„ 15 åˆ†é’Ÿï¼ŒèŠ‚çœçº¦ 80% æ—¶é—´ï¼‰
```

### éªŒè¯ç¼“å­˜ä½¿ç”¨

åœ¨å®¿ä¸»æœºæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç¼“å­˜æƒ…å†µï¼š

```bash
# 1. æŸ¥çœ‹ç°æœ‰é•œåƒ
docker images | grep pptagent

# å¯èƒ½çœ‹åˆ°ï¼š
# pptagent-complete  latest  abc123  X days ago  2GB  â† æ—§é•œåƒ
# pptagent           1.0.0   def456  Just now    2GB  â† æ–°é•œåƒ
# pptagent           latest  def456  Just now    2GB

# 2. æŸ¥çœ‹é•œåƒå±‚å†å²
docker history pptagent:latest

# 3. æ„å»ºæ—¶è§‚å¯Ÿè¾“å‡º
make docker-build
# è§‚å¯Ÿæ¯ä¸ªæ­¥éª¤æ˜¯å¦æ˜¾ç¤º "Using cache"

# 4. ç¬¬äºŒæ¬¡æ„å»ºï¼ˆæµ‹è¯•ç¼“å­˜ï¼‰
make docker-build
# åº”è¯¥éå¸¸å¿«ï¼Œå¤§éƒ¨åˆ†æ˜¾ç¤º "Using cache"
```

### æ—§é•œåƒå¤„ç†å»ºè®®

#### é€‰é¡¹ 1ï¼šä¿ç•™æ—§é•œåƒï¼ˆæ¨èï¼‰

```bash
# ä¸åšä»»ä½•æ“ä½œ
# ä¼˜ç‚¹ï¼šå¯ç”¨äºå›æ»šï¼Œå±‚æ•°æ®ä»å¯è¢«å¤ç”¨
# ç¼ºç‚¹ï¼šå ç”¨ç£ç›˜ç©ºé—´ï¼ˆçº¦ 2GBï¼‰

docker images
# pptagent-complete  latest  ...  2GB  â† ä¿ç•™
# pptagent           1.0.0   ...  2GB
# pptagent           latest  ...  2GB
```

#### é€‰é¡¹ 2ï¼šåˆ é™¤æ—§é•œåƒæ ‡ç­¾

```bash
# åªåˆ é™¤æ ‡ç­¾ï¼Œå±‚æ•°æ®ä»å¯èƒ½ä¿ç•™ï¼ˆå¦‚æœè¢«å…¶ä»–é•œåƒå¼•ç”¨ï¼‰
docker rmi pptagent-complete:latest

# ç»“æœï¼šé•œåƒåç§°æ¶ˆå¤±ï¼Œä½†å±‚ç¼“å­˜ä»å¯ç”¨
```

#### é€‰é¡¹ 3ï¼šæ¸…ç†æœªä½¿ç”¨çš„é•œåƒ

```bash
# åªæ¸…ç† dangling imagesï¼ˆæ¨èï¼‰
docker image prune -f

# æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒï¼ˆè°¨æ…ï¼ï¼‰
docker image prune -a
```

### ç¼“å­˜ä¼˜åŒ–æŠ€å·§ï¼ˆå¯é€‰ï¼‰

å¦‚æœæƒ³æœ€å¤§åŒ–ç¼“å­˜åˆ©ç”¨ï¼Œå¯ä»¥è°ƒæ•´ Dockerfile é¡ºåºï¼š

#### ä¼˜åŒ–åŸåˆ™

1. **ä¸å¸¸å˜åŒ–çš„æ”¾å‰é¢**ï¼ˆapt-get, Python ä¾èµ–ï¼‰
2. **ç»å¸¸å˜åŒ–çš„æ”¾åé¢**ï¼ˆCOPY ä»£ç ï¼‰
3. **åˆ†ç¦»ä¾èµ–å’Œä»£ç **ï¼ˆå…ˆè£…ä¾èµ–ï¼Œå†å¤åˆ¶ä»£ç ï¼‰

#### ä¼˜åŒ–ç¤ºä¾‹

```dockerfile
# âŒ å½“å‰é¡ºåºï¼ˆæ¯æ¬¡æ”¹ä»£ç éƒ½è¦é‡è£… Python åŒ…ï¼‰
COPY . /app/PPTAgent               # ä»£ç æ”¹å˜
RUN uv pip install -e ./pptagent   # è¿é”å¤±æ•ˆï¼Œé‡æ–°å®‰è£…

# âœ… ä¼˜åŒ–åé¡ºåºï¼ˆåªåœ¨ä¾èµ–æ”¹å˜æ—¶é‡è£…ï¼‰
COPY pptagent/pyproject.toml /app/PPTAgent/pptagent/
COPY deeppresenter/pyproject.toml /app/PPTAgent/deeppresenter/
RUN uv pip install -e ./pptagent   # åªåœ¨ pyproject.toml æ”¹å˜æ—¶é‡è£…
COPY . /app/PPTAgent               # ä»£ç æ”¹å˜ä¸å½±å“ä¸Šé¢çš„å®‰è£…å±‚
```

**æ³¨æ„**ï¼šå½“å‰ Dockerfile å·²ç»è¶³å¤Ÿé«˜æ•ˆï¼Œé™¤éæ„å»ºæ—¶é—´æˆä¸ºç“¶é¢ˆï¼Œå¦åˆ™ä¸éœ€è¦ç«‹å³ä¼˜åŒ–ã€‚

### æ„å»ºæ—¶é—´å¯¹æ¯”æ€»ç»“

| åœºæ™¯ | ç¼“å­˜æƒ…å†µ | é¢„æœŸæ—¶é—´ | èŠ‚çœæ¯”ä¾‹ |
|------|---------|---------|---------|
| **ä»é›¶å¼€å§‹** | æ— ç¼“å­˜ | 15 åˆ†é’Ÿ | 0% |
| **æ·»åŠ  chromiumï¼ˆé¦–æ¬¡ï¼‰** | éƒ¨åˆ†ç¼“å­˜ | 10-13 åˆ†é’Ÿ | ~20% |
| **é‡å¤æ„å»ºï¼ˆä»£ç æœªå˜ï¼‰** | å…¨éƒ¨ç¼“å­˜ | 10-30 ç§’ | ~99% |
| **ä»£ç æ”¹å˜** | å‰åŠéƒ¨ç¼“å­˜ | 2-3 åˆ†é’Ÿ | ~80% |

## å®Œæ•´å·¥ä½œæµç¨‹

### åœºæ™¯ 1ï¼šé¦–æ¬¡å‘å¸ƒï¼ˆä½ çš„æƒ…å†µï¼‰

```bash
# 1. æ£€æŸ¥ VERSION æ–‡ä»¶
cat VERSION
# 1.0.0

# 2. æ„å»ºé•œåƒ
make docker-build

# 3. æŸ¥çœ‹é•œåƒ
docker images | grep pptagent
# pptagent  1.0.0   xxx  now  2GB
# pptagent  latest  xxx  now  2GB

# 4. è¿è¡Œå®¹å™¨
make docker-run

# 5. æµ‹è¯•ç¡®è®¤æ— è¯¯åï¼Œæ¨é€åˆ°é•œåƒä»“åº“ï¼ˆå¯é€‰ï¼‰
# docker push pptagent:1.0.0
# docker push pptagent:latest
```

### åœºæ™¯ 2ï¼šç‰ˆæœ¬è¿­ä»£

```bash
# 1. ä¿®æ”¹ä»£ç ï¼ˆä¾‹å¦‚ï¼šä¼˜åŒ–æ€§èƒ½ï¼‰

# 2. å†³å®šç‰ˆæœ¬å·
# å¦‚æœæ˜¯ bug ä¿®å¤ï¼š1.0.0 â†’ 1.0.1
# å¦‚æœæ˜¯æ–°åŠŸèƒ½ï¼š1.0.0 â†’ 1.1.0
# å¦‚æœæ˜¯ç ´åæ€§å˜æ›´ï¼š1.0.0 â†’ 2.0.0

# 3. æ›´æ–° VERSION æ–‡ä»¶
echo "1.1.0" > VERSION

# 4. æ„å»ºæ–°ç‰ˆæœ¬
make docker-build

# 5. éªŒè¯é•œåƒ
make version

# 6. æ¸…ç†æ—§é•œåƒï¼ˆå¯é€‰ï¼‰
docker image prune -f
```

### åœºæ™¯ 3ï¼šå›æ»šåˆ°æ—§ç‰ˆæœ¬

```bash
# æŸ¥çœ‹å¯ç”¨é•œåƒ
docker images | grep pptagent
# pptagent  1.1.0   xxx  now      2GB
# pptagent  1.0.0   yyy  1 day ago  2GB
# pptagent  latest  xxx  now      2GB

# ä½¿ç”¨æ—§ç‰ˆæœ¬è¿è¡Œå®¹å™¨
docker run -dt --name pptagent-old pptagent:1.0.0

# æˆ–è€…å›é€€ latest æ ‡ç­¾ï¼ˆä¸æ¨èï¼‰
docker tag pptagent:1.0.0 pptagent:latest
```

## å¸¸è§é—®é¢˜

### 1. æ—§çš„ latest éœ€è¦å…ˆåˆ é™¤å—ï¼Ÿ

**ä¸éœ€è¦ã€‚** Docker ä¼šè‡ªåŠ¨è¦†ç›– latest æ ‡ç­¾ã€‚

### 2. æ–°æ„å»ºçš„é•œåƒæ ‡ç­¾æ˜¯ä»€ä¹ˆï¼Ÿ

åŸºäºä½ æ·»åŠ  chromium çš„æƒ…å†µï¼Œæ¨èï¼š

- ä¸»æ ‡ç­¾ï¼š`pptagent:1.0.0`ï¼ˆé¦–æ¬¡æ­£å¼ç‰ˆæœ¬ï¼‰
- è‡ªåŠ¨æ ‡ç­¾ï¼š`pptagent:latest`

### 3. å¦‚ä½•æŸ¥çœ‹é•œåƒå ç”¨çš„ç©ºé—´ï¼Ÿ

```bash
# æŸ¥çœ‹æ‰€æœ‰é•œåƒå¤§å°
docker images

# æŸ¥çœ‹ç‰¹å®šé•œåƒ
docker images pptagent

# æŸ¥çœ‹ dangling images
docker images -f "dangling=true"
```

### 4. å¦‚ä½•ä¿ç•™å¤šä¸ªç‰ˆæœ¬ï¼Ÿ

VERSION æ–‡ä»¶åªæ§åˆ¶**æ–°æ„å»º**çš„æ ‡ç­¾ï¼Œæ—§é•œåƒä¸ä¼šè¢«åˆ é™¤ï¼š

```bash
# æ„å»º 1.0.0
echo "1.0.0" > VERSION
make docker-build
# ç”Ÿæˆï¼špptagent:1.0.0, pptagent:latest

# æ„å»º 1.1.0
echo "1.1.0" > VERSION
make docker-build
# ç”Ÿæˆï¼špptagent:1.1.0, pptagent:latestï¼ˆè¦†ç›–ï¼‰
# ä¿ç•™ï¼špptagent:1.0.0ï¼ˆä¸å—å½±å“ï¼‰
```

### 5. å¦‚ä½•æ¨é€åˆ° Docker Hubï¼Ÿ

```bash
# ç™»å½• Docker Hub
docker login

# æ–¹æ³• 1ï¼šç›´æ¥æ¨é€ï¼ˆéœ€è¦å…ˆ tagï¼‰
docker tag pptagent:1.0.0 yourusername/pptagent:1.0.0
docker push yourusername/pptagent:1.0.0
docker push yourusername/pptagent:latest

# æ–¹æ³• 2ï¼šä¿®æ”¹ IMAGE_REPOï¼ˆæ¨èï¼‰
# ç¼–è¾‘ Makefile:
# IMAGE_REPO=yourusername/pptagent

# ç„¶åç›´æ¥æ„å»ºå¹¶æ¨é€
make docker-build
docker push $(IMAGE_REPO):$(IMAGE_TAG)
docker push $(IMAGE_REPO):latest
```

### 6. é•œåƒåç§°æ”¹å˜åè¿˜èƒ½å¤ç”¨ç¼“å­˜å—ï¼Ÿ

**å¯ä»¥ï¼** Docker å±‚ç¼“å­˜åŸºäº**å†…å®¹å“ˆå¸Œ**ï¼Œä¸ä¾èµ–é•œåƒåç§°ã€‚

å½“é•œåƒä» `pptagent-complete:latest` æ”¹åä¸º `pptagent:1.0.0` æ—¶ï¼š

- âœ… **ç›¸åŒçš„ Dockerfile æŒ‡ä»¤ä¼šå¤ç”¨æ—§é•œåƒçš„å±‚**
- âœ… **èŠ‚çœæ„å»ºæ—¶é—´ï¼ˆéƒ¨åˆ†æˆ–å…¨éƒ¨ï¼Œå–å†³äºä¿®æ”¹ï¼‰**
- âœ… **ä¸éœ€è¦åˆ é™¤æ—§é•œåƒå³å¯å¤ç”¨ç¼“å­˜**

è¯¦è§ [Docker å±‚ç¼“å­˜æœºåˆ¶](#docker-å±‚ç¼“å­˜æœºåˆ¶) ç« èŠ‚ã€‚

## ä¸ Git æ ‡ç­¾åŒæ­¥ï¼ˆæ¨èï¼‰

å»ºè®®å°† Docker é•œåƒç‰ˆæœ¬ä¸ Git æ ‡ç­¾åŒæ­¥ï¼š

```bash
# 1. æ›´æ–° VERSION æ–‡ä»¶
echo "1.0.0" > VERSION

# 2. æäº¤æ›´æ”¹
git add VERSION Makefile Dockerfile
git commit -m "release: version 1.0.0 - add chromium support"

# 3. åˆ›å»º Git æ ‡ç­¾
git tag -a v1.0.0 -m "Release version 1.0.0"

# 4. æ¨é€åˆ°è¿œç¨‹
git push origin main
git push origin v1.0.0

# 5. æ„å»º Docker é•œåƒ
make docker-build

# 6. æ¨é€é•œåƒï¼ˆå¦‚æœéœ€è¦ï¼‰
# docker push pptagent:1.0.0
# docker push pptagent:latest
```

## Make å‘½ä»¤é€ŸæŸ¥

```bash
# æŸ¥çœ‹å¸®åŠ©ï¼ˆä¼šæ˜¾ç¤ºå½“å‰ç‰ˆæœ¬ï¼‰
make help

# æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
make version

# æ„å»ºé•œåƒï¼ˆä½¿ç”¨ VERSION æ–‡ä»¶ï¼‰
make docker-build

# å¼ºåˆ¶é‡æ–°æ„å»º
make docker-rebuild

# è¿è¡Œå®¹å™¨
make docker-run

# æ¸…ç† dangling images
docker image prune -f

# æ¸…ç†æ‰€æœ‰ Docker èµ„æº
make clean-all
```

## ç‰ˆæœ¬å†å²ç¤ºä¾‹

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´è¯´æ˜ |
|------|------|---------|
| 1.0.0 | 2026-01-09 | é¦–æ¬¡æ­£å¼å‘å¸ƒï¼Œæ–°å¢ chromium æ”¯æŒ |
| 0.9.0 | 2026-01-08 | Beta ç‰ˆæœ¬ï¼ŒåŸºç¡€åŠŸèƒ½å®Œæˆ |
| 0.1.0 | 2026-01-01 | åˆå§‹ç‰ˆæœ¬ |

## æ€»ç»“

ä½ ç›®å‰çš„æƒ…å†µï¼š

âœ… **å·²å®Œæˆ**ï¼š
- åˆ›å»º `VERSION` æ–‡ä»¶ï¼ˆ1.0.0ï¼‰
- æ›´æ–° `Makefile` ä½¿ç”¨ `IMAGE_REPO` å’Œ `IMAGE_TAG`
- æ·»åŠ ç‰ˆæœ¬ç®¡ç†æŒ‡å—

ğŸš€ **ä¸‹ä¸€æ­¥**ï¼š
```bash
# ç›´æ¥æ„å»ºæ–°ç‰ˆæœ¬å³å¯ï¼ˆä¸éœ€è¦åˆ é™¤æ—§çš„ latestï¼‰
make docker-build

# æ–°é•œåƒæ ‡ç­¾ï¼š
# - pptagent:1.0.0
# - pptagent:latest
```

ğŸ“ **æ³¨æ„äº‹é¡¹**ï¼š
- latest æ ‡ç­¾ä¼šè‡ªåŠ¨è¦†ç›–ï¼Œæ— éœ€æ‰‹åŠ¨åˆ é™¤
- æ—§é•œåƒä¼šå˜æˆ `<none>:<none>`ï¼Œå¯ç”¨ `docker image prune -f` æ¸…ç†
- å»ºè®®å°†ç‰ˆæœ¬å·ä¸ Git æ ‡ç­¾åŒæ­¥
